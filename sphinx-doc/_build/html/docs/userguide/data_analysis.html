
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Data Analysis Commands &mdash; Zelig 5.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/my-styles.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../_static/zelig-small.ico"/>
    <link rel="top" title="Zelig 5.0 documentation" href="../../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<a href="https://github.com/IQSS/Zelig5"><img style="position: absolute; top: 45px; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>
<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">

    <div class="container">

      <div class="navbar-header">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="logo"> <img height="32" width="32" src="http://datascience.iq.harvard.edu/files/styles/os_files_small/public/datascience/files/zelig-small_1.png?itok=catC420a" /></a>
        <a class="navbar-brand" href="../../index.html">Zelig</a>
        <span class="navbar-text navbar-version pull-left"><b>5.0</b></span>
      </div>
        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://datascience.iq.harvard.edu">Data Science at IQSS</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#todo">TODO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#data-analysis-commands">Data Analysis Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#statistical-commands">Statistical Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#graphing-commands">Graphing Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#r-objects">R Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide.html#programming-statements">Programming Statements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide.html#writing-new-models">Writing New Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide.html#adding-models-and-methods-to-zelig">Adding Models and Methods to Zelig</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#for-all-zelig-users">For All Zelig Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#for-zelig-contributors">For Zelig Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release_notes.html#v-5-0-jul-2014">v 5.0 (Jul 2014)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Data Analysis Commands</a><ul>
<li><a class="reference internal" href="#command-syntax">Command Syntax</a><ul>
<li><a class="reference internal" href="#data-structures">Data Structures</a></li>
<li><a class="reference internal" href="#loading-data">Loading Data</a><ul>
<li><a class="reference internal" href="#standard-ways-to-load-data">Standard Ways to Load Data</a></li>
<li><a class="reference internal" href="#special-cases-when-loading-data">Special Cases When Loading Data</a></li>
<li><a class="reference internal" href="#verifying-you-loaded-the-data-correctly">Verifying You Loaded The Data Correctly</a></li>
</ul>
</li>
<li><a class="reference internal" href="#saving-data">Saving Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variables">Variables</a><ul>
<li><a class="reference internal" href="#classes-of-variables">Classes of Variables</a><ul>
<li><a class="reference internal" href="#types-of-variables">Types of Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recoding-variables">Recoding Variables</a><ul>
<li><a class="reference internal" href="#extracting-replacing-and-generating-new-variables">Extracting, Replacing, and Generating New Variables</a></li>
<li><a class="reference internal" href="#logical-operators">Logical Operators</a></li>
<li><a class="reference internal" href="#coding-and-recoding-variables">Coding and Recoding Variables</a></li>
<li><a class="reference internal" href="#missing-data">Missing Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>

<div id="sourcelink">
  <a href="../../_sources/docs/userguide/data_analysis.txt"
     rel="nofollow">Source</a>
</div>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="data-analysis-commands">
<h1>Data Analysis Commands<a class="headerlink" href="#data-analysis-commands" title="Permalink to this headline">¶</a></h1>
<div class="section" id="command-syntax">
<h2>Command Syntax<a class="headerlink" href="#command-syntax" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Once R is installed, you only need to know a few basic elements to get
started. It’s important to remember that R, like any spoken language,
has rules for proper syntax. Unlike English, however, the rules for
intelligible R are small in number and quite precise (see ).</p>
<ol class="arabic simple">
<li>To start R under Linux or Unix, type R at the terminal prompt or M-x
R under ESS.</li>
<li>The R prompt is &gt;.</li>
<li>Type commands and hit enter to execute. (No additional characters,
such as semicolons or commas, are necessary at the end of lines.)</li>
<li>To quit from R, type <tt class="docutils literal"><span class="pre">q()</span></tt> and press enter.</li>
<li>The # character makes R ignore the rest of the line, and is used in
this document to comment R code.</li>
<li>We highly recommend that you make a separate working directory or
folder for each project.</li>
<li>Each R session has a workspace, or working memory, to store the
<em>objects</em> that you create or input. These objects may be:<ol class="arabic">
<li><em>values</em>, which include numerical, integer, character, and logical
values;</li>
<li><em>data structures</em> made up of variables (vectors), matrices, and
data frames; or</li>
<li><em>functions</em> that perform the desired tasks on user-specified
values or data structures.</li>
</ol>
</li>
</ol>
<p>After starting R, you may at any time use Zelig’s built-in help function
to access on-line help for any command. To see help for all Zelig
commands, type help.zelig(command), which will take you to the help page
for all Zelig commands. For help with a specific Zelig or R command
substitute the name of the command for the generic command. For example,
type help.zelig(logit) to view help for the logit model.</p>
</div></blockquote>
<p>.</p>
<blockquote>
<div><p>Zelig uses the syntax of R, which has several essential elements:</p>
<ol class="arabic">
<li><p class="first">R is case sensitive. <tt class="docutils literal"><span class="pre">Zelig</span></tt>, the package or library, is not the
same as <tt class="docutils literal"><span class="pre">zelig</span></tt>, the command.</p>
</li>
<li><p class="first">R functions accept user-defined arguments: while some arguments are
required, other optional arguments modify the function’s default
behavior. Enclose arguments in parentheses and separate multiple
arguments with commas. For example, print(x) or print(x, digits = 2)
prints the contents of the object x using the default number of
digits or rounds to two digits to the right of the decimal point,
respectively. You may nest commands as long as each has its own set
of parentheses: <tt class="docutils literal"><span class="pre">log(sqrt(5))</span></tt> takes the square root of 5 and then
takes the natural log.</p>
</li>
<li><p class="first">The &lt;- operator takes the output of the function on the right and
saves them in the named object on the left. For example, z.out &lt;-
zelig(…) stores the output from zelig() as the object z.out in your
working memory. You may use z.out as an argument in other functions,
view the output by typing z.out at the R prompt, or save z.out to a
file using the procedures described in .</p>
</li>
<li><p class="first">You may name your objects anything, within a few constraints:</p>
<ul class="simple">
<li>You may only use letters (in upper or lower case) and periods to
punctuate your variable names.</li>
<li>You may <em>not</em> use any special characters (aside from the period)
or spaces to punctuate your variable names.</li>
<li>Names cannot begin with numbers. For example, R will not let you
save an object as <tt class="docutils literal"><span class="pre">1997.election</span></tt> but will let you save
<tt class="docutils literal"><span class="pre">election.1997</span></tt>.</li>
</ul>
</li>
<li><p class="first">Use the names() command to see the contents of R objects, and the $
operator to extract elements from R objects. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="c1"># Run least squares regression and save the output in working memory:</span>
<span class="o">&gt;</span> z.out <span class="o">&lt;-</span> zelig<span class="p">(</span>y <span class="o">~</span> x1 <span class="o">+</span> x2<span class="p">,</span> model <span class="o">=</span> <span class="s">&quot;ls&quot;</span><span class="p">,</span> data <span class="o">=</span> mydata<span class="p">)</span>
<span class="c1"># See what&#39;s in the R object:</span>
<span class="o">&gt;</span> names<span class="p">(</span>z.out<span class="p">)</span>
 <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;coefficients&quot;</span>  <span class="s">&quot;residuals&quot;</span>  <span class="s">&quot;effects&quot;</span>  <span class="s">&quot;rank&quot;</span>
<span class="c1"># Extract and display the coefficients in z.out:</span>
<span class="o">&gt;</span> z.out<span class="o">$</span>coefficients
</pre></div>
</div>
</li>
<li><p class="first">All objects have a class designation which tells R how to treat it in
subsequent commands. An object’s class is generated by the function
or mathematical operation that created it.</p>
</li>
<li><p class="first">To see a list of all objects in your current workspace, type:
<tt class="docutils literal"><span class="pre">ls()</span></tt>. You can remove an object permanently from memory by typing
<tt class="docutils literal"><span class="pre">remove(goo)</span></tt> (which deletes the object goo), or remove all the
objects with remove(list = ls()).</p>
</li>
<li><p class="first">To run commands in a batch, use a text editor (such as the Windows R
script editor or emacs) to compose your R commands, and save the file
with a .R file extension in your working directory. To run the file,
type <tt class="docutils literal"><span class="pre">source(Code.R)</span></tt> at the R prompt.</p>
</li>
</ol>
<p>If you encounter a syntax error, check your spelling, case, parentheses,
and commas. These are the most common syntax errors, and are easy to
detect and correct with a little practice. If you encounter a syntax
error in batch mode, R will tell you the line on which the syntax error
occurred.</p>
</div></blockquote>
<div class="section" id="data-structures">
<h3>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h3>
<p>Zelig uses only three of R’s many data structures:</p>
<ol class="arabic simple">
<li>A <strong>variable</strong> is a one-dimensional vector of length .</li>
<li>A <strong>data frame</strong> is a rectangular matrix with  rows and
 columns. Each column represents a variable and each row an
observation. Each variable may have a different class. (See for a
list of classes.) You may refer to specific variables from a data
frame using, for example, data$variable.</li>
<li>A <strong>list</strong> is a combination of different data structures. For
example, z.out contains both coefficients (a vector) and data (a data
frame). Use names() to view the elements available within a list, and
the $ operator to refer to an element in a list.</li>
</ol>
<p>For a more comprehensive introduction, including ways to manipulate
these data structures, please refer to Chapter [a:R].</p>
</div>
<div class="section" id="loading-data">
<h3>Loading Data<a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h3>
<p>Datasets in Zelig are stored in “data frames.” In this section, we
explain the standard ways to load data from disk into memory, how to
handle special cases, and how to verify that the data you loaded is what
you think it is.</p>
<div class="section" id="standard-ways-to-load-data">
<h4>Standard Ways to Load Data<a class="headerlink" href="#standard-ways-to-load-data" title="Permalink to this headline">¶</a></h4>
<p>Make sure that the data file is saved in your working directory. You can
check to see what your working directory is by starting R, and typing
getwd(). If you wish to use a different directory as your starting
directory, use <tt class="docutils literal"><span class="pre">setwd(&quot;dirpath&quot;)</span></tt>, where <tt class="docutils literal"><span class="pre">&quot;dirpath&quot;</span></tt> is the full
directory path of the directory you would like to use as your working
directory.</p>
<p>After setting your working directory, load data using one of the
following methods:</p>
<ol class="arabic">
<li><p class="first">If your dataset is in a <strong>tab- or space-delimited .txt file</strong>, use
<tt class="docutils literal"><span class="pre">read.table(mydata.txt)</span></tt></p>
</li>
<li><p class="first">If your dataset is <strong>a comma separated table</strong>, use
<tt class="docutils literal"><span class="pre">read.csv(mydata.csv)</span></tt>.</p>
</li>
<li><p class="first">To import <strong>SPSS, Stata, and other data files</strong>, use the foreign
package, which automatically preserves field characteristics for each
variable. Thus, variables classed as dates in Stata are automatically
translated into values in the date class for R. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> library<span class="p">(</span>foreign<span class="p">)</span>                           <span class="c1"># Load the foreign package.</span>
<span class="o">&gt;</span> stata.data <span class="o">&lt;-</span> read.dta<span class="p">(</span><span class="s">&quot;mydata.dta&quot;</span><span class="p">)</span>       <span class="c1"># For Stata data.</span>
<span class="o">&gt;</span> spss.data <span class="o">&lt;-</span> read.spss<span class="p">(</span><span class="s">&quot;mydata.sav&quot;</span><span class="p">,</span> to.data.frame <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># For SPSS.</span>
</pre></div>
</div>
</li>
<li><p class="first">To load data in R format, use load(“mydata.RData”).</p>
</li>
<li><p class="first">For sample data sets included with R packages such as Zelig, you may
use the data() command, which is a shortcut for loading data from the
sample data directories. Because the locations of these directories
vary by installation, it is extremely difficult to locate sample data
sets and use one of the three preceding methods; data() searches all
of the currently used packages and loads sample data automatically.
For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> library<span class="p">(</span>Zelig<span class="p">)</span>                              <span class="c1"># Loads the Zelig library.</span>
<span class="o">&gt;</span> data<span class="p">(</span>turnout<span class="p">)</span>                               <span class="c1"># Loads the turnout data.</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="special-cases-when-loading-data">
<h4>Special Cases When Loading Data<a class="headerlink" href="#special-cases-when-loading-data" title="Permalink to this headline">¶</a></h4>
<p>These procedures apply to any of the above read commands:</p>
<ol class="arabic">
<li><p class="first">If your file uses the <strong>first row to identify variable names</strong>, you
should use the option <tt class="docutils literal"><span class="pre">header</span> <span class="pre">=</span> <span class="pre">TRUE</span></tt> to import those field names.
For example,</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> read.csv<span class="p">(</span><span class="s">&quot;mydata.csv&quot;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
<p>will read the words in the first row as the variable names and the
subsequent rows (each with the same number of values as the first) as
observations for each of those variables. If you have additional
characters on the last line of the file or fewer values in one of the
rows, you need to edit the file before attempting to read the data.</p>
</li>
<li><p class="first">The R missing value code is <tt class="docutils literal"><span class="pre">NA</span></tt>. If this value is in your data, R
will recognize your missing values as such. If you have instead used
a place-holder value (such as -9) to represent missing data, you need
to tell R this on loading the data:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> read.table<span class="p">(</span><span class="s">&quot;mydata.tab&quot;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> na.strings <span class="o">=</span> <span class="s">&quot;-9&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note: You must enclose your place holder values in quotes.</p>
</li>
<li><p class="first">Unlike Windows, the file extension in R does not determine the
default method for dealing with the file. For example, if your data
is tab-delimited, but saved as a .sav file,
<tt class="docutils literal"><span class="pre">read.table(mydata.sav)</span></tt> will load your data into R.</p>
</li>
</ol>
</div>
<div class="section" id="verifying-you-loaded-the-data-correctly">
<h4>Verifying You Loaded The Data Correctly<a class="headerlink" href="#verifying-you-loaded-the-data-correctly" title="Permalink to this headline">¶</a></h4>
<p>Whichever method you use, try the <tt class="docutils literal"><span class="pre">names()</span></tt>, <tt class="docutils literal"><span class="pre">dim()</span></tt>, and
<tt class="docutils literal"><span class="pre">summary()</span></tt> commands to verify that the data was properly loaded. For
example,</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> data <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;mydata.csv&quot;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>             <span class="c1"># Read the data.</span>
<span class="o">&gt;</span> dim<span class="p">(</span>data<span class="p">)</span>                    <span class="c1"># Displays the dimensions of the data frame</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">16000</span>  <span class="m">8</span>                   <span class="c1">#  in rows then columns.</span>
<span class="o">&gt;</span> data<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,]</span>                  <span class="c1"># Display rows 1-10 and all columns.</span>
<span class="o">&gt;</span> names<span class="p">(</span>data<span class="p">)</span>                  <span class="c1"># Check the variable names.</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;V1&quot;</span> <span class="s">&quot;V2&quot;</span> <span class="s">&quot;V3&quot;</span>             <span class="c1"># These values indicate that the variables</span>
                               <span class="c1">#  weren&#39;t named, and took default values.</span>
<span class="o">&gt;</span> names<span class="p">(</span>data<span class="p">)</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;income&quot;</span><span class="p">,</span> <span class="s">&quot;educate&quot;</span><span class="p">,</span> <span class="s">&quot;year&quot;</span><span class="p">)</span>     <span class="c1"># Assign variable names.</span>
<span class="o">&gt;</span> summary<span class="p">(</span>data<span class="p">)</span>                <span class="c1"># Returning a summary for each variable.</span>
</pre></div>
</div>
<p>In this case, the summary() command will return the maximum, minimum,
mean, median, first and third quartiles, as well as the number of
missing values for each variable.</p>
</div>
</div>
<div class="section" id="saving-data">
<h3>Saving Data<a class="headerlink" href="#saving-data" title="Permalink to this headline">¶</a></h3>
<p>Use <tt class="docutils literal"><span class="pre">save()</span></tt> to write data or any object to a file in your working
directory. For example,</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> save<span class="p">(</span>mydata<span class="p">,</span> file <span class="o">=</span> <span class="s">&quot;mydata.RData&quot;</span><span class="p">)</span>     <span class="c1"># Saves `mydata&#39; to `mydata.RData&#39;</span>
                                          <span class="c1">#  in your working directory.</span>
<span class="o">&gt;</span> save.image<span class="p">()</span>                            <span class="c1"># Saves your entire workspace to</span>
                                          <span class="c1">#  the default `.RData&#39; file.</span>
</pre></div>
</div>
<p>R will also prompt you to save your workspace when you use the <tt class="docutils literal"><span class="pre">q()</span></tt>
command to quit. When you start R again, it will load the previously
saved workspace. Restarting R will not, however, load previously used
packages. You must remember to load Zelig at the beginning of every R
session.</p>
<p>Alternatively, you can recall individually saved objects from .RData
files using the load() command. For example,</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> load<span class="p">(</span><span class="s">&quot;mydata.RData&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>loads the objects saved in the mydata.RData file. You may save a data
frame, a data frame and associated functions, or other R objects to
file.</p>
</div>
</div>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classes-of-variables">
<h3>Classes of Variables<a class="headerlink" href="#classes-of-variables" title="Permalink to this headline">¶</a></h3>
<p>R variables come in several types. Certain Zelig models require
dependent variables of a certain class of variable. (These are
documented under the manual pages for each model.) Use class(variable)
to determine the class of a variable or class(data$variable) for a
variable within a data frame.</p>
<div class="section" id="types-of-variables">
<h4>Types of Variables<a class="headerlink" href="#types-of-variables" title="Permalink to this headline">¶</a></h4>
<p>For all types of variable (vectors), you may use the c() command to
“concatenate” elements into a vector, the : operator to generate a
sequence of integer values, the seq() command to generate a sequence of
non-integer values, or the rep() function to repeat a value to a
specified length. In addition, you may use the &lt;- operator to save
variables (or any other objects) to the workspace. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> logic <span class="o">&lt;-</span> c<span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># Creates `logic&#39; (5 T/F values).</span>
<span class="o">&gt;</span> var1 <span class="o">&lt;-</span> <span class="m">10</span><span class="o">:</span><span class="m">20</span>                             <span class="c1"># All integers between 10 and 20.</span>
<span class="o">&gt;</span> var2 <span class="o">&lt;-</span> seq<span class="p">(</span>from <span class="o">=</span> <span class="m">5</span><span class="p">,</span> to <span class="o">=</span> <span class="m">10</span><span class="p">,</span> by <span class="o">=</span> <span class="m">0.5</span><span class="p">)</span>  <span class="c1"># Sequence from 5 to 10 by</span>
                                            <span class="c1">#  intervals of 0.5.</span>
<span class="o">&gt;</span> var3 <span class="o">&lt;-</span> rep<span class="p">(</span><span class="kc">NA</span><span class="p">,</span> length <span class="o">=</span> <span class="m">20</span><span class="p">)</span>              <span class="c1"># 20 `NA&#39; values.</span>
<span class="o">&gt;</span> var4 <span class="o">&lt;-</span> c<span class="p">(</span>rep<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">15</span><span class="p">),</span> rep<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">15</span><span class="p">))</span>         <span class="c1"># 15 `1&#39;s followed by 15 `0&#39;s.</span>
</pre></div>
</div>
<p>For the seq() command, you may alternatively specify length instead of
by to create a variable with a specific number (denoted by the length
argument) of evenly spaced elements.</p>
<ol class="arabic">
<li><p class="first"><strong>Numeric</strong> variables are real numbers and the default variable class
for most dataset values. You can perform any type of math or logical
operation on numeric values. If var1 and var2 are numeric variables,
we can compute</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var3 <span class="o">&lt;-</span> log<span class="p">(</span>var2<span class="p">)</span> <span class="o">-</span> <span class="m">2</span><span class="o">*</span>var1      <span class="c1"># Create `var3&#39; using math operations.</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">Inf</span></tt> (infinity), <tt class="docutils literal"><span class="pre">-Inf</span></tt> (negative infinity), <tt class="docutils literal"><span class="pre">NA</span></tt> (missing
value), and <tt class="docutils literal"><span class="pre">NaN</span></tt> (not a number) are special numeric values on
which most math operations will fail. (Logical operations will work,
however.) Use as.numeric() to transform variables into numeric
variables. Integers are a special class of numeric variable.</p>
</li>
<li><p class="first"><strong>Logical</strong> variables contain values of either <tt class="docutils literal"><span class="pre">TRUE</span></tt> or <tt class="docutils literal"><span class="pre">FALSE</span></tt>.
R supports the following logical operators: ==, exactly equals; &gt;,
greater than; &lt;, less than; &gt;=, greater than or equals; &lt;=, less than
or equals; and !=, not equals. The = symbol is <em>not</em> a logical
operator. Refer to for more detail on logical operators. If var1 and
var2 both have  observations, commands such as</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var3 <span class="o">&lt;-</span> var1 <span class="o">&lt;</span> var2
<span class="o">&gt;</span> var3 <span class="o">&lt;-</span> var1 <span class="o">==</span> var2
</pre></div>
</div>
<p>create  TRUE/FALSE observations such that the th
observation in var3 evaluates whether the logical statement is true
for the th value of var1 with respect to the th
value of var2. Logical variables should usually be converted to
integer values prior to analysis; use the as.integer() command.</p>
</li>
<li><p class="first"><strong>Character</strong> variables are sets of text strings. Note that text
strings are always enclosed in quotes to denote that the string is a
value, not an object in the workspace or an argument for a function
(neither of which take quotes). Variables of class character are not
normally used in data analysis, but used as descriptive fields. If a
character variable is used in a statistical operation, it must first
be transformed into a factored variable.</p>
</li>
<li><p class="first"><strong>Factor</strong> variables may contain values consisting of either integers
or character strings. Use factor() or as.factor() to convert
character or integer variables into factor variables. Factor
variables separate unique values into levels. These levels may either
be ordered or unordered. In practice, this means that including a
factor variable among the explanatory variables is equivalent to
creating dummy variables for each level. In addition, some models
(ordinal logit, ordinal probit, and multinomial logit), require that
the dependent variable be a factor variable.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="recoding-variables">
<h3>Recoding Variables<a class="headerlink" href="#recoding-variables" title="Permalink to this headline">¶</a></h3>
<p>Researchers spend a significant amount of time cleaning and recoding
data prior to beginning their analyses. R has several procedures to
facilitate the process.</p>
<div class="section" id="extracting-replacing-and-generating-new-variables">
<h4>Extracting, Replacing, and Generating New Variables<a class="headerlink" href="#extracting-replacing-and-generating-new-variables" title="Permalink to this headline">¶</a></h4>
<p>While it is not difficult to recode variables, the process is prone to
human error. Thus, we recommend that before altering the data, you save
your existing data frame using the procedures described in&nbsp;, that you
only recode one variable at a time, and that you recode the variable
outside the data frame and then return it to the data frame.</p>
<p>To extract the variable you wish to recode, type:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var <span class="o">&lt;-</span> data<span class="o">$</span>var1               <span class="c1"># Copies `var1&#39; from `data&#39;, creating `var&#39;.</span>
</pre></div>
</div>
<p>Do <em>not</em> sort the extracted variable or delete observations from it. If
you do, the th observation in var will no longer match the
th observation in data.</p>
<p>To replace the variable or generate a new variable in the data frame,
type: [insert]</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> data<span class="o">$</span>var1 <span class="o">&lt;-</span> var                <span class="c1"># Replace `var1&#39; in `data&#39; with `var&#39;.</span>
<span class="o">&gt;</span> data<span class="o">$</span>new.var <span class="o">&lt;-</span> var             <span class="c1"># Generate `new.var&#39; in `data&#39; using `var&#39;.</span>
</pre></div>
</div>
<p>To remove a variable from a data frame (rather than replacing one
variable with another):</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> data<span class="o">$</span>var1 <span class="o">&lt;-</span> <span class="kc">NULL</span>
</pre></div>
</div>
</div>
<div class="section" id="logical-operators">
<h4>Logical Operators<a class="headerlink" href="#logical-operators" title="Permalink to this headline">¶</a></h4>
<p>R has an intuitive method for recoding variables, which relies on
logical operators that return statements of TRUE and FALSE. A
mathematical operator (such as ==, !=, &gt;, &gt;= &lt;, and &lt;=) takes two
objects of equal dimensions (scalars, vectors of the same length,
matrices with the same number of rows and columns, or similarly
dimensioned arrays) and compares every element in the first object to
its counterpart in the second object.</p>
<ul>
<li><p class="first">==: checks that one variable “exactly equals” another in a list-wise
manner. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> x <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>                <span class="c1"># Creates the object `x&#39;.</span>
<span class="o">&gt;</span> y <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>                <span class="c1"># Creates the object `y&#39;.</span>
<span class="o">&gt;</span> x <span class="o">==</span> y                               <span class="c1"># Only the 3rd `x&#39; exactly equals</span>
  <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>    <span class="c1">#  its counterpart in `y&#39;.</span>
</pre></div>
</div>
<p>(The = symbol is <em>not</em> a logical operator.)</p>
</li>
<li><p class="first">!=: checks that one variable does not equal the other in a list-wise
manner. Continuing the example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> x <span class="o">!=</span> y
  <span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span>
</pre></div>
</div>
</li>
<li><p class="first">&gt; (&gt;=): checks whether each element in the left-hand object is
greater than (or equal to) every element in the right-hand object.
Continuing the example from above:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> x <span class="o">&gt;</span> y                                   <span class="c1"># Only the 5th `x&#39; is greater</span>
  <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>       <span class="c1">#  than its counterpart in `y&#39;.</span>
<span class="o">&gt;</span> x <span class="o">&gt;=</span> y                                  <span class="c1"># The 3rd `x&#39; is equal to the</span>
  <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>       <span class="c1">#  3rd `y&#39; and becomes TRUE.</span>
</pre></div>
</div>
</li>
<li><p class="first">&lt; (&lt;=): checks whether each element in the left-hand object is less
than (or equal to) every object in the right-hand object. Continuing
the example from above:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> x <span class="o">&lt;</span> y                           <span class="c1"># The elements 1, 2, and 4 of `x&#39; are</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="c1">#  less than their counterparts in `y&#39;.</span>
<span class="o">&gt;</span> x <span class="o">&lt;=</span> y                          <span class="c1"># The 3rd `x&#39; is equal to the 3rd `y&#39;</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="c1">#  and becomes TRUE.</span>
</pre></div>
</div>
</li>
</ul>
<p>For two vectors of five elements, the mathematical operators compare the
first element in x to the first element in y, the second to the second
and so forth. Thus, a mathematical comparison of x and y returns a
vector of five TRUE/FALSE statements. Similarly, for two matrices with 3
rows and 20 columns each, the mathematical operators will return a
 matrix of logical values.</p>
<p>There are additional logical operators which allow you to combine and
compare logical statements:</p>
<ul>
<li><p class="first">&amp;: is the logical equivalent of “and”, and evaluates one array of
logical statements against another in a list-wise manner, returning a
TRUE only if both are true in the same location. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> a <span class="o">&lt;-</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">12</span><span class="p">),</span> nrow <span class="o">=</span> <span class="m">3</span><span class="p">,</span> ncol <span class="o">=</span> <span class="m">4</span><span class="p">)</span>      <span class="c1"># Creates a matrix `a&#39;.</span>
<span class="o">&gt;</span> a
     <span class="p">[,</span><span class="m">1</span><span class="p">]</span> <span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="p">[,</span><span class="m">3</span><span class="p">]</span> <span class="p">[,</span><span class="m">4</span><span class="p">]</span>
<span class="p">[</span><span class="m">1</span><span class="p">,]</span>    <span class="m">1</span>    <span class="m">4</span>    <span class="m">7</span>   <span class="m">10</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span>    <span class="m">2</span>    <span class="m">5</span>    <span class="m">8</span>   <span class="m">11</span>
<span class="p">[</span><span class="m">3</span><span class="p">,]</span>    <span class="m">3</span>    <span class="m">6</span>    <span class="m">9</span>   <span class="m">12</span>
<span class="o">&gt;</span> b <span class="o">&lt;-</span> matrix<span class="p">(</span>c<span class="p">(</span><span class="m">12</span><span class="o">:</span><span class="m">1</span><span class="p">),</span> nrow <span class="o">=</span> <span class="m">3</span><span class="p">,</span> ncol <span class="o">=</span> <span class="m">4</span><span class="p">)</span>      <span class="c1"># Creates a matrix `b&#39;.</span>
<span class="o">&gt;</span> b
     <span class="p">[,</span><span class="m">1</span><span class="p">]</span> <span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="p">[,</span><span class="m">3</span><span class="p">]</span> <span class="p">[,</span><span class="m">4</span><span class="p">]</span>
<span class="p">[</span><span class="m">1</span><span class="p">,]</span>   <span class="m">12</span>    <span class="m">9</span>    <span class="m">6</span>    <span class="m">3</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span>   <span class="m">11</span>    <span class="m">8</span>    <span class="m">5</span>    <span class="m">2</span>
<span class="p">[</span><span class="m">3</span><span class="p">,]</span>   <span class="m">10</span>    <span class="m">7</span>    <span class="m">4</span>    <span class="m">1</span>
<span class="o">&gt;</span> v1 <span class="o">&lt;-</span> a <span class="o">&gt;</span> <span class="m">3</span>                    <span class="c1"># Creates the matrix `v1&#39; (T/F values).</span>
<span class="o">&gt;</span> v2 <span class="o">&lt;-</span> b <span class="o">&gt;</span> <span class="m">3</span>                    <span class="c1"># Creates the matrix `v2&#39; (T/F values).</span>
<span class="o">&gt;</span> v1 <span class="o">&amp;</span> v2                        <span class="c1"># Checks if the (i,j) value in `v1&#39; and</span>
      <span class="p">[,</span><span class="m">1</span><span class="p">]</span> <span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="p">[,</span><span class="m">3</span><span class="p">]</span>  <span class="p">[,</span><span class="m">4</span><span class="p">]</span>       <span class="c1">#  `v2&#39; are both TRUE.  Because columns</span>
<span class="p">[</span><span class="m">1</span><span class="p">,]</span> <span class="kc">FALSE</span> <span class="kc">TRUE</span> <span class="kc">TRUE</span> <span class="kc">FALSE</span>       <span class="c1">#  2-4 of `v1&#39; are TRUE, and columns 1-3</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span> <span class="kc">FALSE</span> <span class="kc">TRUE</span> <span class="kc">TRUE</span> <span class="kc">FALSE</span>       <span class="c1">#  of `var2&#39; are TRUE, columns 2-3 are</span>
<span class="p">[</span><span class="m">3</span><span class="p">,]</span> <span class="kc">FALSE</span> <span class="kc">TRUE</span> <span class="kc">TRUE</span> <span class="kc">FALSE</span>       <span class="c1">#  TRUE here.</span>
<span class="o">&gt;</span> <span class="p">(</span>a <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span>b <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span>              <span class="c1"># The same, in one step.</span>
</pre></div>
</div>
<p>For more complex comparisons, parentheses may be necessary to delimit
logical statements.</p>
</li>
<li><p class="first">|: is the logical equivalent of “or”, and evaluates in a list-wise
manner whether either of the values are TRUE. Continuing the example
from above:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> <span class="p">(</span>a <span class="o">&lt;</span> <span class="m">3</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span>b <span class="o">&lt;</span> <span class="m">3</span><span class="p">)</span>                <span class="c1"># (1,1) and (2,1) in `a&#39; are less</span>
      <span class="p">[,</span><span class="m">1</span><span class="p">]</span>  <span class="p">[,</span><span class="m">2</span><span class="p">]</span>  <span class="p">[,</span><span class="m">3</span><span class="p">]</span>  <span class="p">[,</span><span class="m">4</span><span class="p">]</span>       <span class="c1">#  than 3, and (2,4) and (3,4) in</span>
<span class="p">[</span><span class="m">1</span><span class="p">,]</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>       <span class="c1">#  `b&#39; are less than 3; | returns</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>       <span class="c1">#  a matrix with `TRUE&#39; in (1,1),</span>
<span class="p">[</span><span class="m">3</span><span class="p">,]</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>       <span class="c1">#  (2,1), (2,4), and (3,4).</span>
</pre></div>
</div>
</li>
</ul>
<p>The &amp;&amp; (if and only if) and || (either or) operators are used to
control the command flow within functions. The &amp;&amp; operator returns a
TRUE only if every element in the comparison statement is true; the ||
operator returns a TRUE if any of the elements are true. Unlike the &amp;
and | operators, which return arrays of logical values, the &amp;&amp; and ||
operators return only one logical statement irrespective of the
dimensions of the objects under consideration. Hence, &amp;&amp; and || are
logical operators which are <em>not</em> appropriate for recoding variables.</p>
</div>
<div class="section" id="coding-and-recoding-variables">
<h4>Coding and Recoding Variables<a class="headerlink" href="#coding-and-recoding-variables" title="Permalink to this headline">¶</a></h4>
<p>R uses vectors of logical statements to indicate how a variable should
be coded or recoded. For example, to create a new variable var3 equal to
1 if var1  var2 and 0 otherwise:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var3 <span class="o">&lt;-</span> var1 <span class="o">&lt;</span> var2               <span class="c1"># Creates a vector of n T/F observations.</span>
<span class="o">&gt;</span> var3 <span class="o">&lt;-</span> as.integer<span class="p">(</span>var3<span class="p">)</span>          <span class="c1"># Replaces the T/F values in `var3&#39; with</span>
                                    <span class="c1">#  1&#39;s for TRUE and 0&#39;s for FALSE.</span>
<span class="o">&gt;</span> var3 <span class="o">&lt;-</span> as.integer<span class="p">(</span>var1 <span class="o">&lt;</span> var2<span class="p">)</span>   <span class="c1"># Combine the two steps above into one.</span>
</pre></div>
</div>
<p>In addition to generating a vector of dummy variables, you can also
refer to specific values using logical operators defined in . For
example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> v1 <span class="o">&lt;-</span> var1 <span class="o">==</span> <span class="m">5</span>                     <span class="c1"># Creates a vector of T/F statements.</span>
<span class="o">&gt;</span> var1<span class="p">[</span>v1<span class="p">]</span> <span class="o">&lt;-</span> <span class="m">4</span>                       <span class="c1"># For every TRUE in `v1&#39;, replaces the</span>
                                      <span class="c1">#  value in `var1&#39; with a 4.</span>
<span class="o">&gt;</span> var1<span class="p">[</span>var1 <span class="o">==</span> <span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">4</span>                <span class="c1"># The same, in one step.</span>
</pre></div>
</div>
<p>The index (inside the square brackets) can be created with reference to
other variables. For example,</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var1<span class="p">[</span>var2 <span class="o">==</span> var3<span class="p">]</span> <span class="o">&lt;-</span> <span class="m">1</span>
</pre></div>
</div>
<p>replaces the th value in var1 with a 1 when the th
value in var2 equals the th value in var3. If you use = in
place of ==, however, you will replace all the values in var1 with 1’s
because = is another way to assign variables. Thus, the statement var2 =
var3 is of course true.</p>
<p>Finally, you may also replace any (character, numerical, or logical)
values with special values (most commonly, NA).</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var1<span class="p">[</span>var1 <span class="o">==</span> <span class="s">&quot;don&#39;t know&quot;</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kc">NA</span>   <span class="c1"># Replaces all &quot;don&#39;t know&quot;&#39;s with NA&#39;s.</span>
</pre></div>
</div>
<p>After recoding the var1 replace the old data$var1 with the recoded var1:
data$var1 &lt;- var1. You may combine the recoding and replacement
procedures into one step. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> data<span class="o">$</span>var1<span class="p">[</span>data<span class="o">$</span>var1 <span class="o">=&lt;</span> <span class="m">0</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">-1</span>
</pre></div>
</div>
<p>Alternatively, rather than recoding just specific values in variables,
you may calculate new variables from existing variables. For example,</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> var3 <span class="o">&lt;-</span> var1 <span class="o">+</span> <span class="m">2</span> <span class="o">*</span> var2
<span class="o">&gt;</span> var3 <span class="o">&lt;-</span> log<span class="p">(</span>var1<span class="p">)</span>
</pre></div>
</div>
<p>After generating the new variables, use the assignment mechanism &lt;- to
insert the new variable into the data frame.</p>
<p>In addition to generating vectors of dummy variables, you may transform
a vector into a matrix of dummy indicator variables. For example, see to
transform a vector of  unique values (with 
observations in the complete vector) into a  matrix.</p>
</div>
<div class="section" id="missing-data">
<h4>Missing Data<a class="headerlink" href="#missing-data" title="Permalink to this headline">¶</a></h4>
<p>To deal with missing values in some of your variables:</p>
<ol class="arabic">
<li><p class="first">You may generate multiply imputed datasets using (or other programs).</p>
</li>
<li><p class="first">You may omit missing values. Zelig models automatically apply
list-wise deletion, so no action is required to run a model. To
obtain the total number of observations or produce other summary
statistics using the analytic dataset, you may manually omit
incomplete observations. To do so, first create a data frame
containing only the variables in your analysis. For example:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> new.data <span class="o">&lt;-</span> cbind<span class="p">(</span>data<span class="o">$</span>dep.var<span class="p">,</span> data<span class="o">$</span>var1<span class="p">,</span> data<span class="o">$</span>var2<span class="p">,</span> data<span class="o">$</span>var3<span class="p">)</span>
</pre></div>
</div>
<p>The cbind() command “column binds” variables into a data frame. (A
similar command rbind() “row binds” observations with the same number
of variables into a data frame.) To omit missing values from this new
data frame:</p>
<div class="highlight-r"><div class="highlight"><pre><span class="o">&gt;</span> new.data <span class="o">&lt;-</span> na.omit<span class="p">(</span>new.data<span class="p">)</span>
</pre></div>
</div>
<p>If you perform na.omit() on the full data frame, you risk deleting
observations that are fully observed in your experimental variables,
but missing values in other variables. Creating a new data frame
containing only your experimental variables usually increases the
number of observations retained after na.omit().</p>
</li>
</ol>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/docs/userguide/data_analysis.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2014, The Zelig Team.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'pydata.org');
  ga('send', 'pageview');

</script>



  </body>
</html>