"' not in data set.\n", sep = "")
warning(w)
}
for (i in seq(n[ma]))
ldata[n[ma]][i] <- set(ldata[n[ma]][i][[1]], s[n[ma]][i])
ldata
seq(n[ma])
n[ma]
ldata <- lapply(.self$data, avg)
ldata[n[ma]][i][[1]]
ldata
s[n[ma]][i]
s[n[ma]][i][[1]]
set(ldata[n[ma]][i][[1]], s[n[ma]][i])
ldata[n[ma]][i] <- set(ldata[n[ma]][i][[1]], s[n[ma]][i])
ldata
i
i = 1
set(ldata[n[ma]][i][[1]], s[n[ma]][i])
ldata[n[ma]][i] <- set(ldata[n[ma]][i][[1]], s[n[ma]][i])
ldata
set(ldata[n[ma]][i][[1]], s[n[ma]][i])
s[n[ma]][i]
ldata[n[ma]][i][[1]]
set(ldata[n[ma]][i], s[n[ma]][i])
set(ldata[n[ma]][i][[1]], s[n[ma]][i])
ldata[n[ma]][i][[1]]
ldata[n[ma]][i][[1]]
ldata[n[ma]][i]
ldata <- lapply(.self$data, avg)
ldata[n[ma]][i]
cc <- attr(pred, "dataClasses")
cc
is.factor(ldata[n[ma]][i][[1]])
ldata[n[ma]][i]
s[n[ma]][i]
ldata[n[ma]][i]
set(ldata[n[ma]][i], s[n[ma]][i])
setfactor
leve <- levels(ldata[n[ma]][i][[1]]))
lev <- levels(ldata[n[ma]][i][[1]])
lev
ldata[n[ma]][i]
ldata[n[ma]][i] <- s[n[ma]][i]
ldata
ldata <- lapply(.self$data, avg)
for (i in seq(n[ma])) {
if (is.factor(ldata[n[ma]][i][[1]])) {
lev <- levels(ldata[n[ma]][i][[1]])
ldata[n[ma]][i] <- factor(s[n[ma]][i], levels = lev)
}
}
ldata
lev <- levels(ldata[n[ma]][i][[1]])
lev
ldata <- lapply(.self$data, avg)
lev <- levels(ldata[n[ma]][i][[1]])
lev
lev <- levels(ldata[n[ma]][i])
lev
i
i = 1
lev <- levels(ldata[n[ma]][i])
lev
is.factor(ldata[n[ma]][i][[1]])
ldata[n[ma]][i][[1]]
lev <- levels(ldata[n[ma]][i][[1]])
lev
ldata[n[ma]][i]
ldata[n[ma]][i] <- factor(s[n[ma]][i], levels = lev)
ldata
set <- function(val, newval, lev = levels(val)) {
if (is.numeric(val))
newval
else if (is.ordered(val))
newval
else {
lev <- lev
if (!newval %in% lev)
stop("Wrong factor")
return(factor(newval, levels = lev))
}
}
ldata[n[[ma]]]
ldata[n[ma]]
s[n[ma]]
ldata <- lapply(.self$data, avg)
ldata[n[ma]]
s[n[ma]]
levels(ldata)
levels(ldata[[1]])
levels(ldata[[2]])
ldata[n[ma]] <- s[n[ma]]
ldata
ldata[n[ma]] <- set(ldata[n[ma]], s[n[ma]])
set <- function(val, newval) {
if (is.numeric(val))
newval
else if (is.ordered(val))
newval
else {
lev <- levels(val)
if (!newval %in% lev)
stop("Wrong factor")
return(factor(newval, levels = lev))
}
}
ldata[n[ma]] <- set(ldata[n[ma]], s[n[ma]])
i =1
ldata[n[ma]][i] <- set(ldata[n[ma]][i], s[n[ma]][i])
ldata[n[ma]][i]
ldata <- lapply(.self$data, avg)
ldata[n[ma]][i]
s[n[ma]][i]
s[n[ma]][i][[1]]
ldata[n[ma]][i][[1]]
levels(ldata[n[ma]][i][[1]])
set(ldata[n[ma]][i][[1]], s[n[ma]][i][[1]])
ldata[n[ma]][i][[1]] <- set(ldata[n[ma]][i][[1]], s[n[ma]][i][[1]])
ldata
for (i in seq(n[ma]))
ldata[n[ma]][i][[1]] <- set(ldata[n[ma]][i][[1]], s[n[ma]][i][[1]])
ldata
f <- update(formula(.self$zelig.out), 1 ~ .)
model.matrix(f, ldata)
s
setval <- function(val, newval) {
if (is.numeric(val))
newval
else if (is.ordered(val))
newval
else {
lev <- levels(val)
if (!newval %in% lev)
stop("Wrong factor")
return(factor(newval, levels = lev))
}
}
ldata <- lapply(.self$data, avg)
if (length(s) > 0) {
pred <- terms(.self$zelig.out, "predvars")
n <- intersect(as.character(attr(pred, "predvars"))[-1],
names(.self$data))
if (is.list(s[[1]]))
s <- s[[1]]
m <- match(names(s), n)
ma <- m[!is.na(m)]
if (!all(complete.cases(m))) {
w <- paste("Variable '", names(s[is.na(m)]),
"' not in data set.\n", sep = "")
warning(w)
}
for (i in seq(n[ma]))
ldata[n[ma]][i][[1]] <- setval(ldata[n[ma]][i][[1]], s[n[ma]][i][[1]])
}
ldata
f <- update(formula(.self$zelig.out), 1 ~ .)
model.matrix(f, ldata)
library(Zelig5)
z5 <- zls$new()
z5$zelig(unem ~ gdp + trade + capmob +
country, data = macro)
z5
z5$setx(country = "United States", unem = 2)
z5$setx.out
z5$setx1(country = "Japan")
z5$setx.out$x1
z5$setx()
z5$setx.out
z5$setx(country = "United States", unem = 2)
z5$setx.out
z5 <- zls$new()
z5$zelig(dist ~ speed, data = cars)
z5
z5$setx(speed = 30)
z5$setx.out$x
z5$setx1(speed = 40)
z5$setx.out$x1
z5$setx1(xssx = 0, jbcjdhsb = 987)
z5$setx.out$x1
z5$setx1(scs =98457, speed = 50, dcksj = 34)
z5$setx.out$x1
z5$sim(num=10)
z.out <- zelig(vote ~ race + educate + age + I(age^2) + income,
model = "ls", data = turnout)
summary(z.out)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setx(educate = 12, age = 18, race = "others")
z5$setx.out
z5$setx1(educate = 13, age = 18, race = "others")
set.seed(42)
z5$sim(num = 5)
z5$summarize()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
z5$setrange(educate = 12:13)
z5$setx.out
z5$setx(country = "United Stdates", unem = 2)
z5 <- zls$new()
z5$zelig(unem ~ gdp + trade + capmob +
country, data = macro)
z5
z5$setx(country = "United Stdates", unem = 2)
z5$setx(country = "United States", unem = 2)
z5$setx.out
z5$setx(country = "Sweden", unem = 2)
z5$setx.out
z5$setx(country = "United States", unem = 2)
z5$setx.out
x.out <- setx(z.out, age = 18:20)
z.out <- zelig(vote ~ age , data = turnout, model = "ls",
by = "race")
summary(z.out)
x.out <- setx(z.out, age = 18:20)
s.out <- sim(z.out, x.out)
summary(s.out)
z.out <- zelig(vote ~ age , data = turnout, model = "ls",
by = "race")
summary(z.out)
x.out <- setx(z.out, age = 18:20)
s.out <- sim(z.out, x.out)
summary(s.out)
s.out
str(s.out)
library(Zelig5)
z5 <- zls$new()
z5 <- zls$new()
z5$zelig(dist ~ ., data = cars)
z5
library(Zelig5)
z5 <- zls$new()
z5$zelig(dist ~ ., data = cars)
z5
z5$model.call
z5$zelig.call
z5$setx(sascxasx = 9879, speed = 30, sdjchbsdc = 87, kcsbc = 8787)
z5$setx(sascxasx = 9879)
z5$setx1(speed = 30)
z5$setx()
z5$setx.out
set.seed(42)
z5$sim(num=3)
z5$sim.out
z5$summarize()
z5$model.call
library(Zelig5)
z5 <- zls$new()
z5$zelig(dist ~ ., data = cars)
z5
sturnout <- split(turnout, factor(turnout$race))
z5 <- zls$new()
z5$zelig(vote ~ age , data = sturnout[[i]])
z5$zelig(vote ~ age , data = turnout, by "race")
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$data.by
z5$model.call
z5$model.call$formula
z5$model.call$data
z5
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout)
z5$zelig.out
z5$setx(age = 18)
z5$summarize()
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$setx(age = 18)
z5$zelig.out
z5$model$cal
z5$model.call
stats::lm(formula = formula, data = .self$data.by[[i]])
stats::lm(formula = formula, data = .self$data.by[[1]])
stats::lm(formula = formula, data = z5$data.by[[1]])
stats::lm(formula = formula, data = z5$data.by[[1]])
z5$data.by[[1]]
stats::lm(formula = formula, data = z5$data.by[[1]])
df= z5$data.by[[1]]
stats::lm(formula = formula, data = df)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$setx(age = 18)
z5$summarize()
by
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$zelig.out
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$setx(age = 18)
z5$zelig.out.by
z5$zelig.call
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$setx(age = 18)
z5$summarize()
z5$zelig.out.by
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$zelig.out.by
z5$setx(age = 18)
z5$summarize()
z5$model.call$data
model.call
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$zelig.out.by
z5$zelig.out.by[[1]]
z5$zelig.out.by[[2]]
z5$zelig.out.by[[1]]
z5$zelig.out.by[[2]]
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$zelig.out.by
z5$zelig.out.by[[1]]
z5$zelig.out.by[[2]]
z5$zelig(vote ~ age , data = turnout)
z5$zelig.out
z5$zelig.out.by[[1]]
z5$zelig.out.by[[2]]
z5$zelig.out.by
z5$zelig.out.by[[1]]
summary(z5$zelig.out.by[[1]])
summary(z5$zelig.out.by[[2]])
summary(z5$zelig.out.by[[1]])
summary(z5$zelig.out.by[[2]])
summary(z5$zelig.out.by[[1]])
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$zelig.out.by
sturnout
names(sturnout)
names(.self$data.by)
.self$data.by
names(z5$data.by)
library(Zelig5)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout)
z5$zelig.out
z5$setx(age = 18)
z5$summarize()
z5$setx(age = 18)
z5$sim()
z5$summarize()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout)
z5$zelig.out
z5$setx(age = 18)
z5$sim()
z5$summarize()
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5$zelig.out.by
z5$setx(age = 18)
z5$summarize()
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
z5$zelig.out
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout)
z5$zelig.out
z5$setx(age = 18)
z5$sim()
z5$summarize()
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout, by = "race")
data(turnout)
z5 <- zls$new()
z5$zelig(vote ~ age , data = turnout)
z5$zelig.out
z5$setx(age = 18)
z5$sim()
z5$summarize()
p <- read.csv("http://www.ats.ucla.edu/stat/data/poisson_sim.csv")
p <- within(p, {
prog <- factor(prog, levels = 1:3,
labels = c("General", "Academic", "Vocational"))
id <- factor(id)
})
head(p)
library(MASS)
w <- runif(200)
# Zelig 4 code:
library(Zelig)
z.out <- zelig(num_awards ~ prog + math, data=p, model="poisson",
weights=w)
summary(z.out)
x.out <- setx(z.out, math = 40)
set.seed(42)
s.out <- sim(z.out, x = x.out, num = 1000)
summary(s.out)
z5 <- zpoisson$new()
z5$zelig(num_awards ~ prog + math, data=p,
weights=w)
z5$zelig(formula=num_awards ~ prog + math, data=p,
weights=w)
z5
z5$model.call
z5$zelig.call
z5 <- zls$new()
z5$zelig(dist ~ ., data = cars)
z5
z5 <- zpoisson$new()
z5$zelig(num_awards ~ prog + math, data=p,
weights=w)
library(Zelig5)
z5 <- zpoisson$new()
z5$zelig(num_awards ~ prog + math, data=p,
weights=w)
z5
z5$zelig.call
z5$model.call
library(Zelig5)
z5 <- zpoisson$new()
z5$zelig(num_awards ~ prog + math, data=p,
weights=w)
z5
z.out <- zeligw(dist ~ speed, model = "ls", data = cars)
print(z.out)
x.out <- setxw(z.out, speed=30)
x1.out <- setxw(z.out, speed = 50)
s.out <- simw(z.out, x.out, x1.out, num = 1000)
summaryw(s.out)
z.out <- zeligw(dist ~ speed, model = "ls", data = cars)
print(z.out)
x.out <- setxw(z.out, speed=30)
x1.out <- setxw(z.out, speed = 50)
s.out <- simw(z.out, x.out, x1.out, num = 1000)
summaryw(s.out)
f <- function(form = dist ~ speed, model = "ls", data = cars) {
zz.out <- zeligw(formula = form, model = model, data = data)
print(zz.out)
xx.out <- setxw2(zz.out, speed = 30)
ss.out <- simw2(zz.out, xx.out, num = 1000)
ss.out$summarize()
}
f()
f()
FF <- function(form = dist ~ speed, data = cars) {
Z <- zls$new()
Z$zelig(formula = form, data = data)
print(Z)
Z$setx(speed = 3)
return(Z)
}
ZZ <- FF()
data(sanction)
z5 <- znegbinom$new()
z5$zelig(num ~ target + coop, data = sanction)
library(Zelig5)
library(Zelig)
# epsilon does not seem to be taken into account
z.out <- zelig(admit ~ gre + gpa, data = mydata, model="logit",
epsilon=.0001)
summary(z.out)
x.out <- setx(z.out, gpa=1.3, gre=4500, speed=12)
set.seed(42)
library(Zelig)
# epsilon does not seem to be taken into account
z.out <- zelig(admit ~ gre + gpa, data = mydata, model="logit",
epsilon=.0001)
summary(z.out)
x.out <- setx(z.out, gpa=1.3, gre=4500, speed=12)
set.seed(42)
s.out <- sim(z.out, x = x.out, num=1000)
summary(s.out)
z5 <- zlogit$new()
z5$zelig(admit ~ gre + gpa, data = mydata,
epsilon=.0001)
mydata <- read.csv("http://www.ats.ucla.edu/stat/data/binary.csv")
mydata$rank <- factor(mydata$rank)
z5 <- zlogit$new()
z5$zelig(admit ~ gre + gpa, data = mydata,
epsilon=.0001)
z5
z5
z5$zelig(admit ~ gre + gpa, data = mydata)
z5
stats::glm(formula = admit ~ gre + gpa, family = binomial("logit"),
data = mydata)
stats::glm(formula = admit ~ gre + gpa, family = binomial("logit"),
data = mydata, epsilon = 1e-04)
stats::glm(formula = admit ~ gre + gpa, family = binomial("logit"),
data = mydata, epsilon = 1)
z5$zelig(admit ~ gre + gpa, data = mydata,
epsilon=1)
z5
