z5$sim(num=10)
z5$summarize()
z5$cite()
library(Zelig5)
data(coalition)
z5 <- zlognorm$new()
z5$zelig(Surv(duration, ciep12) ~ fract + numst2, model = "lognorm",
data = coalition)
z5
z5$setx(numst2 = 0)
set.seed(42)
z5$sim(num=10)
z5$summarize()
z5$cite()
library(Zelig5)
data(coalition)
z5 <- zgamma$new()
z5$zelig(duration ~ fract + numst2, data = coalition)
z5
z5$setx(numst2 = 0)
set.seed(42)
z5$sim(num=1000)
z5$summarize()
library(Zelig5)
data(coalition)
z5 <- zexp$new()
z5$zelig(Surv(duration, ciep12) ~ fract + numst2, model = "exp",
data = coalition)
z5
z5$setx(numst2 = 0)
set.seed(42)
z5$sim(num=10)
z5$summarize()
library(Zelig)
data(coalition)
z.out <- zelig(Surv(duration, ciep12) ~ fract + numst2, model = "exp",
data = coalition)
summary(z.out)
x.low <- setx(z.out, numst2 = 0)
set.seed(42)
s.out <- sim(z.out, x = x.low, num=10)
summary(s.out)
z5$summarize()
library(Zelig5)
z5 <- zlogit$new()
z5$zelig(admit ~ gre + gpa, data = mydata,
epsilon=.0001)
mydata <- read.csv("http://www.ats.ucla.edu/stat/data/binary.csv")
mydata$rank <- factor(mydata$rank)
z5 <- zlogit$new()
z5$zelig(admit ~ gre + gpa, data = mydata,
epsilon=.0001)
# removed epsilon to compare with Zelig 4
z5$zelig(admit ~ gre + gpa, data = mydata)
z5
z5$setx(gpa=1.3, gre=4500, speed=12)
set.seed(42)
z5$sim(num=1000)
z5$summarize()
library(Zelig5)
z5 <- zlogit$new()
z5$zelig(admit ~ gre + gpa, data = mydata,
epsilon=.0001)
# removed epsilon to compare with Zelig 4
z5$zelig(admit ~ gre + gpa, data = mydata)
z5
z5$setx(gpa=1.3, gre=4500, speed=12)
set.seed(42)
z5$sim(num=1000)
z5$summarize()
z5$cite()
z.out <- zelig(admit ~ gre + gpa, data = mydata, model="logit",
epsilon=.0001)
summary(z.out)
x.out <- setx(z.out, gpa=1.3, gre=4500, speed=12)
set.seed(42)
s.out <- sim(z.out, x = x.out, num=1000)
summary(s.out)
data(turnout)
z.out <- zelig(vote ~ race + educate,
data = turnout,
model = "logit")
summary(z.out)
x.out <- setx(z.out, educate = 12)
set.seed(42)
s.out <- sim(z.out, x = x.out, num = 1000)
summary(s.out)
z5 <- zlogit$new()
z5$zelig(vote ~ race + educate,
data = turnout)
z5$show()
z5$setx(educate = 12)
set.seed(42)
z5$sim(num = 1000)
z5$summarize()
summary(s.out)
data(turnout)
z.out <- zelig(vote ~ race + educate + age + I(age^2) + income,
model = "logit", data = turnout)
summary(z.out)
x.low <- setx(z.out, educate = 12, age = 18:95)
x.high <- setx(z.out, educate = 16, age = 18:95)
plot.ci(s.out, xlab = "Age in Years",
ylab = "Predicted Probability of Voting",
main = "Effect of Education and Age on Voting Behavior")
data(turnout)
z.out <- zelig(vote ~ race + educate + age + I(age^2) + income,
model = "logit", data = turnout)
summary(z.out)
x.low <- setx(z.out, educate = 12, age = 18:95)
x.high <- setx(z.out, educate = 16, age = 18:95)
s.out <- sim(z.out, x = x.low, x1 = x.high)
plot.ci(s.out, xlab = "Age in Years",
ylab = "Predicted Probability of Voting",
main = "Effect of Education and Age on Voting Behavior")
text(x=50,y=.95,labels="College Education (16 years)",cex=0.6)
text(x=60,y=.8,labels="High School Education (12 years)",cex=0.6)
z.out <- zelig(vote ~ age , data = turnout, model = "ls",
by = "race")
summary(z.out)
data(turnout)
split(turnout)
split(turnout, f = "race")
l <- split(turnout, f = "race")
l[[1]]
length(l)
l <- split(turnout, f = "white")
l[[1]]
length(l)
r <- split(turnout, f = "race")
r <- split(turnout, f = levels(turnout$race))
r[[1]]
levels(turnout$race)
r[[2]]
r <- split(turnout, levels(turnout$race))
r[[1]]
r <- split(turnout, factor(turnout$race))
r[[1]]
r[[2]]
by(turnout,  factor(turnout$race), zelig)
by = "race")
by(turnout,  factor(turnout$race), zelig, model = "ls")
by(turnout,  factor(turnout$race), mean)
by(turnout,  factor(turnout$race), summary)
by(turnout,  factor(turnout$race), summary)
mean(turnout)
by(turnout,  factor(turnout$race), lm, vote ~ age)
by(turnout,  factor(turnout$race), function(x) lm(vote ~ age, data = x))
by(turnout,  factor(turnout$race),
zelig(vote ~ age , data = x, model = "ls",
by = "race")
)
by(turnout,  factor(turnout$race),
function(x) = zelig(vote ~ age , data = x, model = "ls",
by = "race"))
by(turnout,  factor(turnout$race),
function(x) = zelig(vote ~ age , data = x, model = "ls")
by(turnout,  factor(turnout$race),
function(x) zelig(vote ~ age , data = x, model = "ls")
)
by(warpbreaks, warpbreaks[,"tension"],
function(x) lm(breaks ~ wool, data = x))
by(turnout,  factor(turnout$race),
function(x) lm(vote ~ age , data = x, model = "ls"))
by(turnout,  factor(turnout$race),
function(x) lm(vote ~ age , data = x))
library(Zelig5)
z5 <- zls$new()
z5$zelig(dist ~ ., data = cars)
z5
z5$model.call
z5$zelig.call
z5$setx(sascxasx = 9879, speed = 30, sdjchbsdc = 87, kcsbc = 8787)
z5$setx(sascxasx = 9879)
z5$setx1(speed = 30)
z5$setx()
z5$setx.out
set.seed(42)
z5$sim(num=3)
z5$sim.out
z5$summarize()
z5$cite()
z.out <- zelig(vote ~ race + educate + age + I(age^2) + income,
model = "ls", data = turnout)
summary(z.out)
x.low <- setx(z.out, educate = 12:13, age = 18)
summary(z.out)
z.out <- zelig(vote ~ race + educate + age + I(age^2) + income,
model = "ls", data = turnout)
summary(z.out)
z.out <- zelig(vote ~ race + educate + age + I(age^2) + income,
model = "ls", data = turnout)
summary(z.out)
x.low <- setx(z.out, educate = 12:13, age = 18)
x.low
x.high <- setx(z.out, educate = 12:13, age = 18)
x.high
set.seed(42)
s.out <- sim(z.out, x = x.low, x1 = x.high, num = 5)
summary(s.out)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setx(educate = 12, age = 18, race = "others")
z5$setx.out
z5$setx1(educate = 13, age = 18, race = "others")
set.seed(42)
z5$sim(num = 5)
z5$summarize()
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5$setrange(educate = 12:13)
z5$setx.out
z5$setrange(educate = 12:13, race = c("white", "others"))
z5$setx.out
z5$setrange(educate = 12:13)
z5$setx.out
z5$setrange(educate = 12:13)
z5$setx.out
.self <- z5
s <- list(educate = 12:13)
s
pred <- terms(.self$zelig.out, "predvars")
n <- intersect(as.character(attr(pred, "predvars"))[-1],
names(.self$data))
s
length(s) > 0
is.list(s[[1]])
s[[1]]
s[[1]]
as.list(s[[1]])
as.vector(s[[1]])
(length(s) > 0 && is.list(s[[1]]))
m <- match(names(s), n)
m
s <- list(educate = 12:13, age = 18)
(length(s) > 0 && is.list(s[[1]]))
print(s)
m <- match(names(s), n)
m
ma <- m[!is.na(m)]
if (!all(complete.cases(m))) {
w <- paste("Variable '", names(s[is.na(m)]),
"' not in data set.\n", sep = "")
warning(w)
}
ma <- m[!is.na(m)]
if (!all(complete.cases(m))) {
w <- paste("Variable '", names(s[is.na(m)]),
"' not in data set.\n", sep = "")
warning(w)
}
if (!all(complete.cases(m)) & length(m) == 0) {
ldata <- list()
ldata[n[ma]] <- s[n[ma]]
} else if (all(is.na(m))) {
ldata <- lapply(.self$data, avg)
} else {
ldata <- lapply(.self$data[n[-ma]], avg)
ldata[n[ma]] <- s[n[ma]]
}
ldata
cc <- attr(pred, "dataClasses")
nn <- names(ldata)
for (i in seq(nn))
if (cc[nn[i]] == "factor") {
if (!(ldata[[nn[i]]] %in% levels(.self$data[[nn[i]]]))) {
w <- paste("Factor variable '", nn[i],
"' has no level '", ldata[[nn[i]]], "'.\n", sep = "")
warning(w)
ldata[[nn[i]]] <- avg(.self$data[[nn[i]]])
} else {
ldata[[nn[i]]] <- factor(ldata[[nn[i]]],
levels = levels(.self$data[[nn[i]]]))
}
}
ldata
expand.grid(s)
.self$set(as.list(m[i, ]))
i
i=1
.self$set(as.list(m[i, ]))
m <- expand.grid(s)
.self$set(as.list(m[i, ]))
m
s <- list(educate = 12:13)
m <- expand.grid(s)
m
.self$set(as.list(m[i, ]))
.self$set(as.list(m[2, ]))
s <- list(as.list(m[i, ]))
s
m
s <- list(educate = 12:13, age = 18)
z5 <- zls$new()
library(Zelig5)
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18, race = c("white", "others"))
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13)
z5$setx.out
z5$setrange(educate = 12:13, age = 18, race = c("white", "others"))
z5$setx.out
debug(z5$set)
z5$setrange(educate = 12:13)
pred
print(s)
print(s)
undebug(z5$set)
z5$setrange(educate = 12:13)
z5$setrange(educate = 12:13, age = 18, race = c("white", "others"))
z5$setrange(educate = 12:13)
s <- list(educate = 12:13, age = 18)
z5$setrange(educate = 12:13, age = 18)
expand.grid(s)
s <- list(educate = 12:13)
expand.grid(s)
z5$setrange(educate = 12:13, age = 18)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
undebug(z5$set)
z5$setrange(educate = 12:13)
z5$setx.out
z5$setrange(educate = 12:13, age = 18)
z5$setrange(educate = 12:13)
s
names(s)
m <- expand.grid(s)
m
names(m)
i=1
as.list(m[i, ])
s <- list(educate = 12:13, age = 18)
m <- expand.grid(s)
as.list(m[i, ])
m
lsit(m)
list(m)
as.list(m)
s <- list(educate = 12:13)
s
expand.grid(s)
as.list(expand.grid(s))
dim(expand.grid(s))
m <- expand.grid(s)
i=1
as.list(m[i, ])
as.list(s)
m
l <- as.list(m)
names(l) <- names(m)
l
names(m[1, ])
names(m)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
z5$setrange(educate = 12:13)
z5$setx.out
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
s
.self$set(s)
.self$set(as.list(s))
.self$set(as.list(m))
m <- expand.grid(s)
m
.self$set(as.list(m[1, ]))
.self$set(as.list(m[2, ]))
l <- as.list(as.list(m[i, ]))
l
names(l) <- names(names(m))
l
.self$setx.out$range[[i]] <- .self$set(as.list(m[i, ]))
names(l) <- names(m)
l
.self$set(as.list(m[i, ]))
.self$set(l)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
z5$setrange(educate = 12:13)
z5$setx.out
s <- list(educate = c(10, 15))
expand.grid(s)
z5$setrange(educate = c(10, 15), age = 18)
z5$setx.out
z5$setrange(educate = c(10, 15), age = c(10, 18)
)
z5$setx.out
z5$summarize()
z5$cite()
lm
by(turnout,  factor(turnout$race),
function(x) lm(vote ~ age , data = x))
by(turnout,  factor(turnout$race),
function(x) zelig(vote ~ age , data = x, model = "ls"))
by(turnout,  factor(turnout$race),
function(x) zeligw(vote ~ age , data = x, model = "ls"))
by(turnout,  factor(turnout$race),
function(x) zelig(vote ~ age , data = x, model = "ls"))
z.out <- zelig(vote ~ age , data = turnout, model = "ls",
by = "race")
summary(z.out)
by(turnout,  factor(turnout$race),
function(x) lm(vote ~ age , data = x))
lm
by(turnout,  factor(turnout$race),
function(x) zelig(vote ~ age , data = x, model = "ls"))
by(turnout,  factor(turnout$race),
function(x) zeligw(vote ~ age , data = x, model = "ls"))
z.out <- zelig(vote ~ age , data = turnout, model = "ls",
by = "race")
summary(z.out)
x.out <- setx(z.out)
s.out <- sim(z.out, x.out)
summary(s.out)
by(turnout,  factor(turnout$race),
function(x) {
zeligw(vote ~ age , data = x, model = "ls")
})
by(turnout,  factor(turnout$race),
function(x) {
z.out <- zeligw(vote ~ age , data = x, model = "ls")
s.out <- setxw(z.out)
})
by(turnout,  factor(turnout$race),
function(x) zelig(vote ~ age , data = x, model = "ls"))
by(turnout,  factor(turnout$race),
function(x) zeligw(vote ~ age , data = x, model = "ls"))
z.out <- by(turnout,  factor(turnout$race),
function(x) zeligw(vote ~ age , data = x, model = "ls"))
rm(z.out)
z.out <- by(turnout,  factor(turnout$race),
function(x) zeligw(vote ~ age , data = x, model = "ls"))
z.out
by(turnout,  factor(turnout$race),
function(x) {
z.out <- zeligw(vote ~ age , data = x, model = "ls")
s.out <- setxw(z.out)
})
z.out
z.out[[1]]
z.out[[2]]
library(Zelig5)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
z5$setrange(educate = 12:13, age = 18)
library(Zelig5)
z5 <- zls$new()
z5$zelig(vote ~ race + educate + age + I(age^2) + income, data = turnout)
z5
z5$setrange(educate = 12:13, age = 18)
z5$setx.out
r <- split(turnout, factor(turnout$race))
r
z5
z.out
-------------------------------------------------------------
z5
.self <- z5
.self$data
by = "race"
split(.self$data, factor(.self[[by]]))
split(.self$data, factor(.self$data[[by]]))
